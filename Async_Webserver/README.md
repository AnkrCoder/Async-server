# 异步HTTP服务器

这是一个基于 Boost.Beast 实现的异步HTTP服务器，支持多线程处理请求，并集成了MySQL数据库连接池。

## 系统架构

### 主要组件
1. HTTP服务器模块 (`http_server/`)
   - 处理HTTP请求/响应
   - 支持GET、POST、HEAD方法
   - 提供静态文件服务
   - 处理用户登录和注册请求

2. 数据库模块 (`database/`)
   - 数据库连接池管理
   - 用户表结构定义
   - 预处理语句处理

3. 配置管理 (`server_config.json`)
   - 服务器配置（地址、端口、线程数）
   - 数据库配置
   - 日志配置

### 技术特点
1. **异步I/O**
   - 使用 Boost.Asio 实现异步I/O操作
   - 支持高并发请求处理
   - 非阻塞式I/O操作

2. **数据库连接池**
   - 高效管理数据库连接
   - 减少连接建立/断开开销
   - 支持连接复用

3. **多线程支持**
   - 可配置的线程池
   - 基于 strand 的线程安全保证
   - 优化多核CPU利用

4. **日志系统**
   - 集成 Google glog
   - 支持不同级别的日志
   - 可配置的日志输出

## 系统优点

1. **高性能**
   - 异步I/O减少线程阻塞
   - 连接池优化数据库访问
   - 多线程处理提高并发能力

2. **可扩展性**
   - 模块化设计
   - 清晰的代码结构
   - 易于添加新功能

3. **配置灵活**
   - JSON格式配置文件
   - 运行时可调整参数
   - 支持热重载配置

4. **安全性考虑**
   - 预处理语句防SQL注入
   - 错误处理和日志记录
   - 路径遍历检查

## 可改进方面

1. **功能扩展**
   - [ ] 添加 HTTPS 支持
   - [ ] 实现 WebSocket 支持
   - [ ] 添加请求限流机制
   - [ ] 支持文件上传功能

2. **性能优化**
   - [ ] 实现响应数据缓存
   - [ ] 添加压力测试模块
   - [ ] 优化大文件传输
   - [ ] 实现零拷贝传输

3. **安全增强**
   - [ ] 添加密码哈希存储
   - [ ] 实现会话管理
   - [ ] 添加 CSRF 保护
   - [ ] 支持 OAuth 认证

4. **运维友好**
   - [ ] 添加健康检查接口
   - [ ] 实现优雅关闭
   - [ ] 添加监控指标
   - [ ] 支持容器化部署

5. **代码质量**
   - [ ] 增加单元测试
   - [ ] 添加集成测试
   - [ ] 规范错误处理
   - [ ] 完善注释文档

## 快速开始

1. 确保已安装所需依赖：
   ```bash
   # 查看 prerequisites.md 了解详细要求
   ```

2. 编译项目：
   ```bash
   make
   ```

3. 运行服务器：
   ```bash
   ./server
   ```

## 目录结构
```
.
├── database/         # 数据库相关代码
│   ├── db_pool.*    # 数据库连接池
│   ├── schema.*     # 数据库表结构
│   └── setup.sql    # 数据库初始化脚本
├── http_server/     # HTTP服务器代码
│   ├── http_server.*    # 核心服务器实现
│   └── server_config.*  # 配置管理
├── root/           # 静态文件目录
├── logs/           # 日志目录
├── server.cpp      # 主程序入口
└── server_config.json  # 配置文件
```
